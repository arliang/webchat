WE.pageCreate={init:function(){this.ui={form:$("#create"),topic:$("#topic"),desBox:$("#des-box"),pwdBox:$("#pwd-box"),infoBox:$("#info-box")};this.regEvent()},regEvent:function(){var a=this;this.ui.desBox.find(".des-btn").click(function(){a.ui.desBox.find(".input-content").is(":hidden")?(a.ui.desBox.find(".input-content").removeClass("hidden"),$(this).find(".icon-pen").removeClass("icon-pen").addClass("icon-close")):(a.ui.desBox.find(".input-content").addClass("hidden"),$(this).find(".icon-close").addClass("icon-pen").removeClass("icon-close"));
return!1});this.ui.pwdBox.find(".pwd-btn").click(function(){a.ui.pwdBox.find(".input-content").is(":hidden")?(a.ui.pwdBox.find(".input-content").removeClass("hidden"),a.ui.pwdBox.find(".header").css({"border-bottom":"#F0E02F solid 1px"}),$(this).find(".icon-pen").removeClass("icon-pen").addClass("icon-close")):(a.ui.pwdBox.find(".input-content").addClass("hidden"),a.ui.pwdBox.find(".header").css({"border-bottom":"0"}),$(this).find(".icon-close").addClass("icon-pen").removeClass("icon-close"));return!1});
this.ui.form.submit(function(b){b.preventDefault();if(""==$.trim(a.ui.topic.val()))return!1;a.createTopic()})},createTopic:function(){var a=$.trim(this.ui.topic.val()),b=$.trim(this.ui.desBox.find("textarea").val()),e=$.trim(this.ui.pwdBox.find("input").val()),c=new WE.api.RoomModel,d=new WE.Controller;d.update=function(a){a=a.data;0==a.code&&(location.href="/t/"+a.result.id)};c.addObserver(d);c.create(a,b,e)}};
